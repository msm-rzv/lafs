const searchData = {
    writers: [
        {
            name: "Ahmad Faraz",
            url: "Writers/Ahmad_Faraz.html",
            category: "Writer"
        },
        {
            name: "Allama Iqbal",
            url: "Writers/Allama_Iqbal.html",
            category: "Writer"
        },
        {
            name: "Faiz Ahmad Faiz",
            url: "Writers/Faiz_Ahmad_Faiz.html",
            category: "Writer"
        },
        {
            name: "Iftikhar Arif",
            url: "Writers/IftikharArif.html",
            category: "Writer"
        },
        {
            name: "Jaun Eliya",
            url: "Writers/Jaun_Eliya.html",
            category: "Writer"
        },
        {
            name: "Kaifi Azmi",
            url: "Writers/Kaifi_Azmi.html",
            category: "Writer"
        },
        {
            name: "Mirza Ghalib",
            url: "Writers/Mirza_Ghalib.html",
            category: "Writer"
        },
        {
            name: "Munir Niazi",
            url: "Writers/Munir_Niazi.html",
            category: "Writer"
        },
        {
            name: "Parveen Shakir",
            url: "Writers/Parveen_Shakir.html",
            category: "Writer"
        }
    ],
    poems: [
        // Ahmad Faraz Poems
        {
            name: "Muhasara",
            url: "Poems/AhmadFarazPoems/Muhasara.html",
            category: "Poem",
            author: "Ahmad Faraz"
        },
        {
            name: "Ranjish",
            url: "Poems/AhmadFarazPoems/Ranjish.html",
            category: "Poem",
            author: "Ahmad Faraz"
        },
        {
            name: "Suna Hai",
            url: "Poems/AhmadFarazPoems/SunaHai.html",
            category: "Poem",
            author: "Ahmad Faraz"
        },
        {
            name: "Ye Meri",
            url: "Poems/AhmadFarazPoems/YeMeri.html",
            category: "Poem",
            author: "Ahmad Faraz"
        },
        // Allama Iqbal Poems
        {
            name: "Himalaya",
            url: "Poems/AllamaIqbalPoems/Himalaya.html",
            category: "Poem",
            author: "Allama Iqbal"
        },
        {
            name: "Jawab e Shikwa",
            url: "Poems/AllamaIqbalPoems/JawabeSshikwa.html",
            category: "Poem",
            author: "Allama Iqbal"
        },
        {
            name: "Masjid e Qurtuba",
            url: "Poems/AllamaIqbalPoems/Masjid-e-Qurtuba.html",
            category: "Poem",
            author: "Allama Iqbal"
        },
        {
            name: "Shikwa",
            url: "Poems/AllamaIqbalPoems/Shikwa.html",
            category: "Poem",
            author: "Allama Iqbal"
        },
        {
            name: "Tulu e Islam",
            url: "Poems/AllamaIqbalPoems/Tulu-e-Islam.html",
            category: "Poem",
            author: "Allama Iqbal"
        },
        // Iftikhar Arif Poems
        {
            name: "Khwab",
            url: "Poems/IftikharArifpoems/Khwab.html",
            category: "Poem",
            author: "Iftikhar Arif"
        },
        {
            name: "Kuch",
            url: "Poems/IftikharArifpoems/Kuch.html",
            category: "Poem",
            author: "Iftikhar Arif"
        },
        {
            name: "Merekhuda",
            url: "Poems/IftikharArifpoems/Merekhuda.html",
            category: "Poem",
            author: "Iftikhar Arif"
        },
        {
            name: "Nobat",
            url: "Poems/IftikharArifpoems/Nobat.html",
            category: "Poem",
            author: "Iftikhar Arif"
        },
        // Jaun Eliya Poems
        {
            name: "Bekarar Se",
            url: "Poems/JaunEliyaPoems/BekarariSe.html",
            category: "Poem",
            author: "Jaun Eliya"
        },
        {
            name: "Saza",
            url: "Poems/JaunEliyaPoems/Saza.html",
            category: "Poem",
            author: "Jaun Eliya"
        },
        {
            name: "Jinr Guzregi",
            url: "Poems/JaunEliyaPoems/JinrGuzregi.html",
            category: "Poem",
            author: "Jaun Eliya"
        },
        {
            name: "Zinda Giya Hai",
            url: "Poems/JaunEliyaPoems/ZindaGiyaHai.html",
            category: "Poem",
            author: "Jaun Eliya"
        },
        // Kaifi Azmi Poems
        {
            name: "Aurat",
            url: "Poems/KafiAzmirPoems/Aurat.html",
            category: "Poem",
            author: "Kaifi Azmi"
        },
        {
            name: "Main Dhundta",
            url: "Poems/KafiAzmirPoems/MainDhundta.html",
            category: "Poem",
            author: "Kaifi Azmi"
        },
        {
            name: "Tuntina",
            url: "Poems/KafiAzmirPoems/Tuntina.html",
            category: "Poem",
            author: "Kaifi Azmi"
        },
        // Mirza Ghalib Poems
        {
            name: "Bazicha",
            url: "Poems/MirzaGhalibPoems/Bazicha.html",
            category: "Poem",
            author: "Mirza Ghalib"
        },
        {
            name: "Dil hi to Hai",
            url: "Poems/MirzaGhalibPoems/DilHiToHai.html",
            category: "Poem",
            author: "Mirza Ghalib"
        },
        {
            name: "Sabr Kahan",
            url: "Poems/MirzaGhalibPoems/SabrKahan.html",
            category: "Poem",
            author: "Mirza Ghalib"
        },
        {
            name: "Ye Na Thi",
            url: "Poems/MirzaGhalibPoems/YeNaThi.html",
            category: "Poem",
            author: "Mirza Ghalib"
        },
        // Munir Niazi Poems
        {
            name: "Hamesha Dair",
            url: "Poems/MunirNiaziPoems/HameshaDair.html",
            category: "Poem",
            author: "Munir Niazi"
        },
        {
            name: "Kuch Baaten",
            url: "Poems/MunirNiaziPoems/KuchBaaten.html",
            category: "Poem",
            author: "Munir Niazi"
        },
        {
            name: "Mohabbat Nahi",
            url: "Poems/MunirNiaziPoems/MohabbatNahi.html",
            category: "Poem",
            author: "Munir Niazi"
        },
        {
            name: "Sapna Aage",
            url: "Poems/MunirNiaziPoems/SapnaAage.html",
            category: "Poem",
            author: "Munir Niazi"
        },
        // Parveen Shakir Poems
        {
            name: "Barish",
            url: "Poems/ParveenShakirPoems/Barish.html",
            category: "Poem",
            author: "Parveen Shakir"
        },
        {
            name: "Khushbu",
            url: "Poems/ParveenShakirPoems/Khushbu.html",
            category: "Poem",
            author: "Parveen Shakir"
        },
        {
            name: "Lautne ka Ehsas",
            url: "Poems/ParveenShakirPoems/LautnekaEhsas.html",
            category: "Poem",
            author: "Parveen Shakir"
        },
        {
            name: "Natak",
            url: "Poems/ParveenShakirPoems/Natak.html",
            category: "Poem",
            author: "Parveen Shakir"
        }
    ],
    genres: [
        {
            name: "Mystical",
            url: "Poetry/Mystical.html",
            category: "Genre"
        },
        {
            name: "Nature",
            url: "Poetry/Nature.html",
            category: "Genre"
        },
        {
            name: "Romantic",
            url: "Poetry/Romantic.html",
            category: "Genre"
        },
        {
            name: "Social",
            url: "Poetry/Social.html",
            category: "Genre"
        },
        {
            name: "Spiritual",
            url: "Poetry/Spiritual.html",
            category: "Genre"
        }
    ]
};

// Combine all search data
const allSearchData = [
    ...searchData.writers,
    ...searchData.poems,
    ...searchData.genres
];

// Search function
function searchItems(query) {
    if (!query || query.trim() === '') {
        return [];
    }
    
    const searchTerm = query.toLowerCase().trim();
    
    return allSearchData.filter(item => {
        const nameMatch = item.name.toLowerCase().includes(searchTerm);
        const authorMatch = item.author && item.author.toLowerCase().includes(searchTerm);
        const categoryMatch = item.category.toLowerCase().includes(searchTerm);
        
        return nameMatch || authorMatch || categoryMatch;
    });
}

// DOM manipulation functions
function toggleSearch() {
    const searchContainer = document.getElementById('search-container');
    const searchInput = document.getElementById('search-input');
    const searchButton = document.getElementById('search-button');
    
    if (searchContainer.classList.contains('active')) {
        // Close search
        searchContainer.classList.remove('active');
        searchInput.value = '';
        hideSearchResults();
        searchButton.style.display = 'block';
    } else {
        // Open search
        searchContainer.classList.add('active');
        searchButton.style.display = 'none';
        setTimeout(() => {
            searchInput.focus();
        }, 300);
    }
}

function handleSearch() {
    const searchInput = document.getElementById('search-input');
    const query = searchInput.value;
    const results = searchItems(query);
    
    if (query.trim() === '') {
        hideSearchResults();
        return;
    }
    
    displaySearchResults(results);
}

function displaySearchResults(results) {
    const resultsContainer = document.getElementById('search-results');
    
    if (results.length === 0) {
        resultsContainer.innerHTML = '<div class="no-results">No results found</div>';
        resultsContainer.style.display = 'block';
        return;
    }
    
    const resultsHTML = results.map(item => `
        <div class="search-result-item" onclick="navigateToResult('${item.url}')">
            <div class="result-name">${item.name}</div>
            <div class="result-category">${item.category}${item.author ? ' â€¢ ' + item.author : ''}</div>
        </div>
    `).join('');
    
    resultsContainer.innerHTML = resultsHTML;
    resultsContainer.style.display = 'block';
}

function hideSearchResults() {
    const resultsContainer = document.getElementById('search-results');
    resultsContainer.style.display = 'none';
}

function navigateToResult(url) {
    window.location.href = url;
}

// Close search when clicking outside
document.addEventListener('click', function(event) {
    const searchContainer = document.getElementById('search-container');
    const searchButton = document.getElementById('search-button');
    
    if (!searchContainer.contains(event.target) && !searchButton.contains(event.target)) {
        if (searchContainer.classList.contains('active')) {
            toggleSearch();
        }
    }
});

// Initialize search functionality when DOM is loaded
document.addEventListener('DOMContentLoaded', function() {
    const searchInput = document.getElementById('search-input');
    if (searchInput) {
        searchInput.addEventListener('input', handleSearch);
        searchInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                const results = searchItems(searchInput.value);
                if (results.length > 0) {
                    navigateToResult(results[0].url);
                }
            }
        });
    }
});